<!DOCTYPE html>
<html style="width:100%; height:100%; padding:0px; margin:0px;">
<head>
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta charset="UTF-8">
<meta name="viewport" content="width=1200">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Bondage Club</title>
<link rel="icon" type="image/png" href="Icons/Rope_Active.png">
</head>

<style>
    canvas {
		padding-left: 0;
        padding-right: 0;
        margin-left: auto;
        margin-right: auto;
        display: block;		
		width:100%;
		top:0;
		bottom: 0;
		left: 0;
		right: 0;
		position: absolute;
		margin:auto;
    }
</style>

<script src="Common.js"></script>
<script src="Drawing.js"></script>
<script src="Character.js"></script>
<script src="CharacterAppearance.js"></script>
<script src="Inventory.js"></script>
<script src="Assets.js"></script>
<script src="Assets/Female3DCG/Assets.js"></script>
<script>

// When the code is loaded
window.onload = function() {
	CurrentScreen = "CharacterAppearance";
	IsMobile = DetectMobile();
	DrawLoad();
	AssetLoad();
	CharacterLoad("*Player*", [], []);
	InventoryCreate();
	CharacterAppearanceSetDefault(Character[0], "Female3DCG");
	MainRun();	
};

// Main game running state, runs the current screen code and bottom bar
function MainRun() {
	MainCanvas.width = window.innerWidth;
	MainCanvas.height = MainCanvas.width / 2;
	MainCanvas.left = 500;
	clearInterval(CurrentTimer);
	CurrentTimer = setInterval("MainRun()", RunInterval);
	DynamicFunction(CurrentScreen + "_Run()");
}

// When the user presses a key, we send the KeyDown event to the other screens
function KeyDown(event) {
	KeyPress = event.keyCode || event.which;
	if (CheatAllow) CheatKey();
	DynamicFunction(CurrentScreen + "_KeyDown()");
}

// When the user clicks, we fire the click event for other screens
function Click(event) {
	if (!IsMobile) {
		MouseMove(event);
		DynamicFunction(CurrentScreen + "_Click()");
	}
}

// When the user clicks, we fire the click event for other screens
function Touch(event) {
	if (IsMobile) {
		var rect = document.getElementById("MainCanvas").getBoundingClientRect();
		MouseX = Math.round((event.touches[0].clientX - rect.left) * 2000 / window.innerWidth);
		MouseY = Math.round((event.touches[0].clientY - rect.top) * 1000 / window.innerHeight);
		DynamicFunction(CurrentChapter + "_" + CurrentScreen + "_Click()");
	} 
}

// When mouse move, we keep the mouse position for other scripts
function MouseMove(event) {
	var rect = document.getElementById("MainCanvas").getBoundingClientRect();
	MouseX = Math.round((event.clientX - rect.left) * 2000 / window.innerWidth);
	MouseY = Math.round((event.clientY - rect.top) * 2000 / window.innerWidth);
}

// When the mouse is away from the control, we stop keeping the coordinates
function LoseFocus(event) {
	MouseX = -1;
	MouseY = -1;
}
 
</script>

<body style="width:100%; height:100%; background-color:black; margin:0px; padding:0px; overflow:hidden;">
	<canvas id="MainCanvas" Width="2000" Height="1000" onClick="Click(event);" onTouchStart="Touch(event);" onMouseMove="MouseMove(event);" onMouseLeave="LoseFocus(event);"></canvas>
</body>
</html>
